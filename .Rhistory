full_cancer_data = cbind(full_cancer_data, rising_death_rates, falling_death_rates, rising_incidence_rates, falling_incidence_rates)
View(full_cancer_data)
full_cancer_data = left_join(mort, incd, by = "FIPS")
### Data cleaning
### First, clean up Age-Adjusted Death Rates.
### First, there are '*' contained as values. As per the documentation contained in cancer_data_notes.csv,
### this represents, data is being withheld for reasons of confidentiality. Looking at the data, this appears to
### occur in a variety of states. I decided to remove these because we aren't looking to answer the question of which places
### have different confidentiality agreements and I know I want to use this variable.
full_cancer_data = full_cancer_data[!(full_cancer_data$`Age-Adjusted Death Rate` == "*"),]
### Since this looks good now, I am going to parse as a number
full_cancer_data$`Age-Adjusted Death Rate` = parse_number(full_cancer_data$`Age-Adjusted Death Rate`)
### The confidence interval variables for the death rate, as well as the average deaths per year also look good now, so I will convert them to numeric as well.
full_cancer_data$`Lower 95% Confidence Interval for Death Rate` = parse_number(full_cancer_data$`Lower 95% Confidence Interval for Death Rate`)
full_cancer_data$`Upper 95% Confidence Interval for Death Rate` = parse_number(full_cancer_data$`Upper 95% Confidence Interval for Death Rate`)
full_cancer_data$`Average Deaths per Year` = parse_number(full_cancer_data$`Average Deaths per Year`)
### Now, for the variables related to the death rate trends, we have values of '**'. In the documentation, this is described as the data being too sparse to
### estimate the trends. For now, I will set these values to NA, but will leave the observations in the data, since I am not yet sure how I am going to be using these variables.
full_cancer_data$`Recent 5-Year Trend (2) in Death Rates` = as.numeric(full_cancer_data$`Recent 5-Year Trend (2) in Death Rates`)
full_cancer_data$`Lower 95% Confidence Interval for Trend (death rates)` = as.numeric(full_cancer_data$`Lower 95% Confidence Interval for Trend (death rates)`)
full_cancer_data$`Upper 95% Confidence Interval for Trend (death rates)` = as.numeric(full_cancer_data$`Upper 95% Confidence Interval for Trend (death rates)`)
### cleaning up Age Adjusted Incidence Rate: we have '*', '-' and '--'
### * are once again due to confidentiality, but also occur if the counts are too low. We can see that in the corresponding value for Average annual count (incidence)
### I've decided to set these to NA for now as well because I have no reasonable estimate as to what the true values could be.
### for values '-', we have and '--', they have to do with state legistlation. Once again, we'll set these to NA.
### for hashtags, this is about not including cases diagnosed in other states. For now, I'll store which observations have this, and test if its significant later.
hashtag_data = grepl( "#", full_cancer_data$`Age Adjusted Incidence Rate per 100,000`, fixed = TRUE)
hashtag_FIPS = list()
for(i in seq(1, length(hashtag_data), by = 1)){
if(hashtag_data[[i]] == TRUE){
hashtag_FIPS = append(hashtag_FIPS, full_cancer_data$FIPS[[i]])
}
}
### then, parse these as a number.
full_cancer_data$`Age Adjusted Incidence Rate per 100,000` = parse_number(full_cancer_data$`Age Adjusted Incidence Rate per 100,000`)
full_cancer_data$`Lower 95% Confidence Interval (incidence rates)` = parse_number(full_cancer_data$`Lower 95% Confidence Interval (incidence rates)`)
full_cancer_data$`Upper 95% Confidence Interval (incidence rates)` = parse_number(full_cancer_data$`Upper 95% Confidence Interval (incidence rates)`)
full_cancer_data$`Average Annual Count (incidence)` = parse_number(full_cancer_data$`Average Annual Count (incidence)`)
full_cancer_data$`Recent 5-year trend in incidence rates` = parse_number(full_cancer_data$`Recent 5-year trend in incidence rates`)
full_cancer_data$`Lower 95% Confidence Interval for Trend (incidence rates)` = parse_number(full_cancer_data$`Lower 95% Confidence Interval for Trend (incidence rates)`)
full_cancer_data$`Upper 95% Confidence Interval for Trend (incidence rates)` = parse_number(full_cancer_data$`Upper 95% Confidence Interval for Trend (incidence rates)`)
### Lastly, remove "**" from both death and Incident Recent Trends
for(i in seq(1, nrow(full_cancer_data), by = 1)){
if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "**"){
full_cancer_data$`Recent Trend (death rates)`[[i]] = NA
}
if(full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "**"){
full_cancer_data$`Recent Trend (incidence rates)`[[i]] = NA
}
}
t_cancer_data = cbind(full_cancer_data, rising_death_rates)
View(t_cancer_data)
t_cancer_data = rbind(full_cancer_data, rising_death_rates)
View(t_cancer_data)
t_cancer_data = cbind(full_cancer_data, as.vector(rising_death_rates))
View(t_cancer_data)
typeof(rising_death_rates)
for(i in seq(1, nrow(full_cancer_data), by = 1)){
### first, deal with NAs
if(is.na(full_cancer_data$`Recent Trend (death rates)`[[i]])){
rising_death_rates[i] = NA
falling_death_rates[i] = NA
} else if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "rising"){
rising_death_rates[i] = 1
falling_death_rates[i] = 0
} else if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "falling"){
rising_death_rates[i] = 0
falling_death_rates[i] = 1
} else{
rising_death_rates[i] = 0
falling_death_rates[i] = 0
}
if(is.na(full_cancer_data$`Recent Trend (incidence rates)`[i])){
rising_incidence_rates[i] = NA
falling_incidence_rates[i] = NA
} else if(full_cancer_data$`Recent Trend (incidence rates)`[i] == "rising"){
rising_incidence_rates[i] = 1
falling_incidence_rates[i] = 0
} else if(full_cancer_data$`Recent Trend (incidence rates)`[i] == "falling"){
rising_incidence_rates[i] = 0
falling_incidence_rates[i] = 1
} else{
rising_incidence_rates[i] = 0
falling_incidence_rates[i] = 0
}
}
t_cancer_data = cbind(full_cancer_data, rising_death_rates)
View(t_cancer_data)
t_cancer_data = as.tibble(full_cancer_data, rising_death_rates)
View(t_cancer_data)
t_cancer_data = as_tibble(full_cancer_data, rising_death_rates)
for(i in seq(1, nrow(full_cancer_data), by = 1)){
### first, deal with NAs
if(is.na(full_cancer_data$`Recent Trend (death rates)`[[i]])){
rising_death_rates = append(rising_death_rates, NA)
falling_death_rates = append(falling_death_rates, NA)
} else if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "rising"){
rising_death_rates = append(rising_death_rates, 1)
falling_death_rates = append(falling_death_rates, 0)
} else if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "falling"){
rising_death_rates = append(rising_death_rates, 0)
falling_death_rates = append(falling_death_rates, 1)
} else{
rising_death_rates = append(rising_death_rates, 0)
falling_death_rates = append(falling_death_rates, 0)
}
if(is.na(full_cancer_data$`Recent Trend (incidence rates)`[i])){
rising_incidence_rates = append(rising_incidence_rates, NA)
falling_incidence_rates = append(falling_incidence_rates, NA)
} else if(full_cancer_data$`Recent Trend (incidence rates)`[i] == "rising"){
rising_incidence_rates = append(rising_incidence_rates, 1)
falling_incidence_rates = append(falling_incidence_rates, 0)
} else if(full_cancer_data$`Recent Trend (incidence rates)`[i] == "falling"){
rising_incidence_rates = append(rising_incidence_rates, 0)
falling_incidence_rates = append(falling_incidence_rates, 1)
} else{
rising_incidence_rates = append(rising_incidence_rates, 0)
falling_incidence_rates = append(falling_incidence_rates, 0)
}
}
t_cancer_data = cbind(full_cancer_data, rising_death_rates)
View(t_cancer_data)
t_cancer_data = cbind(rising_death_rates, falling_death_rates)
t_cancer_data = cbind(t(rising_death_rates), t(falling_death_rates))
View(t_cancer_data)
print(rising_death_rates)
t_cancer_data = merge(rising_death_rates, falling_death_rates)
t_cancer_data = as.data.frame(rising_death_rates, falling_death_rates)
t_cancer_data = do.call(rbind.data.frame, Map('c', rising_death_rates, falling_death_rates))
t_cancer_data = do.call(rbind.data.frame, Map('c', rising_death_rates, falling_death_rates, rising_incidence_rates, falling_incidence_rates))
View(t_cancer_data)
names(t_cancer_data) = c("rising_death_rates", "falling_death_rates", "rising_incidence_rates", "falling_incidence_rates")
View(t_cancer_data)
tt = cbind(full_cancer_data, t_cancer_data)
for(i in seq(1, nrow(full_cancer_data), by = 1)){
### first, deal with NAs
if(is.na(full_cancer_data$`Recent Trend (death rates)`[[i]])){
rising_death_rates = append(rising_death_rates, NA)
falling_death_rates = append(falling_death_rates, NA)
} else if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "rising"){
rising_death_rates = append(rising_death_rates, 1)
falling_death_rates = append(falling_death_rates, 0)
} else if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "falling"){
rising_death_rates = append(rising_death_rates, 0)
falling_death_rates = append(falling_death_rates, 1)
} else{
rising_death_rates = append(rising_death_rates, 0)
falling_death_rates = append(falling_death_rates, 0)
}
if(is.na(full_cancer_data$`Recent Trend (incidence rates)`[i])){
rising_incidence_rates = append(rising_incidence_rates, NA)
falling_incidence_rates = append(falling_incidence_rates, NA)
} else if(full_cancer_data$`Recent Trend (incidence rates)`[i] == "rising"){
rising_incidence_rates = append(rising_incidence_rates, 1)
falling_incidence_rates = append(falling_incidence_rates, 0)
} else if(full_cancer_data$`Recent Trend (incidence rates)`[i] == "falling"){
rising_incidence_rates = append(rising_incidence_rates, 0)
falling_incidence_rates = append(falling_incidence_rates, 1)
} else{
rising_incidence_rates = append(rising_incidence_rates, 0)
falling_incidence_rates = append(falling_incidence_rates, 0)
}
}
### create categorical variables for past trends - stable, falling rising are the possible values for each
falling_death_rates = list() ### 1 if Recent Trend (death rates) is falling, 0 otherwise
rising_death_rates = list() ### 1 if Recent Trend (death rates) is rising, 0 otherwise
### if both falling and rising death rates are 0, Recent Trend (death rates) is stable
falling_incidence_rates = list() ### 1 if Recent Trend (incidence rates) is falling, 0 otherwise
rising_incidence_rates = list() ### 1 if Recent Trend (incidence rates) rising, 0 otherwise
### if both falling and rising incidence rates are 0, Recent Trend (incidence rates) is stable
for(i in seq(1, nrow(full_cancer_data), by = 1)){
### first, deal with NAs
if(is.na(full_cancer_data$`Recent Trend (death rates)`[[i]])){
rising_death_rates = append(rising_death_rates, NA)
falling_death_rates = append(falling_death_rates, NA)
} else if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "rising"){
rising_death_rates = append(rising_death_rates, 1)
falling_death_rates = append(falling_death_rates, 0)
} else if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "falling"){
rising_death_rates = append(rising_death_rates, 0)
falling_death_rates = append(falling_death_rates, 1)
} else{
rising_death_rates = append(rising_death_rates, 0)
falling_death_rates = append(falling_death_rates, 0)
}
if(is.na(full_cancer_data$`Recent Trend (incidence rates)`[i])){
rising_incidence_rates = append(rising_incidence_rates, NA)
falling_incidence_rates = append(falling_incidence_rates, NA)
} else if(full_cancer_data$`Recent Trend (incidence rates)`[i] == "rising"){
rising_incidence_rates = append(rising_incidence_rates, 1)
falling_incidence_rates = append(falling_incidence_rates, 0)
} else if(full_cancer_data$`Recent Trend (incidence rates)`[i] == "falling"){
rising_incidence_rates = append(rising_incidence_rates, 0)
falling_incidence_rates = append(falling_incidence_rates, 1)
} else{
rising_incidence_rates = append(rising_incidence_rates, 0)
falling_incidence_rates = append(falling_incidence_rates, 0)
}
}
t_cancer_data = do.call(rbind.data.frame, Map('c', rising_death_rates, falling_death_rates, rising_incidence_rates, falling_incidence_rates))
names(t_cancer_data) = c("rising_death_rates", "falling_death_rates", "rising_incidence_rates", "falling_incidence_rates")
tt = cbind(full_cancer_data, t_cancer_data)
View(tt)
i_cancer_data = do.call(rbind.data.frame, Map('c', rising_death_rates, falling_death_rates, rising_incidence_rates, falling_incidence_rates))
names(i_cancer_data) = c("rising_death_rates", "falling_death_rates", "rising_incidence_rates", "falling_incidence_rates")
full_cancer_data = cbind(full_cancer_data, i_cancer_data)
View(full_cancer_data)
for(i in seq(1, nrow(full_cancer_data), by = 1)){
if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "**"){
full_cancer_data$`Recent Trend (death rates)`[[i]] = NA
}
if(full_cancer_data$`Recent Trend (incidence rates)`[[i]] == c("**", "*", "-", "--")){
full_cancer_data$`Recent Trend (incidence rates)`[[i]] = NA
}
}
for(i in seq(1, nrow(full_cancer_data), by = 1)){
if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "**"){
full_cancer_data$`Recent Trend (death rates)`[[i]] = NA
}
if(full_cancer_data$`Recent Trend (incidence rates)`[[i]] in c("**", "*", "-", "--")){
full_cancer_data$`Recent Trend (incidence rates)`[[i]] = NA
}
}
for(i in seq(1, nrow(full_cancer_data), by = 1)){
if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "**"){
full_cancer_data$`Recent Trend (death rates)`[[i]] = NA
}
if(full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "**" | full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "*"
|full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "-" | full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "--"){
full_cancer_data$`Recent Trend (incidence rates)`[[i]] = NA
}
}
full_cancer_data = left_join(mort, incd, by = "FIPS")
### Data cleaning
### First, clean up Age-Adjusted Death Rates.
### First, there are '*' contained as values. As per the documentation contained in cancer_data_notes.csv,
### this represents, data is being withheld for reasons of confidentiality. Looking at the data, this appears to
### occur in a variety of states. I decided to remove these because we aren't looking to answer the question of which places
### have different confidentiality agreements and I know I want to use this variable.
full_cancer_data = full_cancer_data[!(full_cancer_data$`Age-Adjusted Death Rate` == "*"),]
### Since this looks good now, I am going to parse as a number
full_cancer_data$`Age-Adjusted Death Rate` = parse_number(full_cancer_data$`Age-Adjusted Death Rate`)
### The confidence interval variables for the death rate, as well as the average deaths per year also look good now, so I will convert them to numeric as well.
full_cancer_data$`Lower 95% Confidence Interval for Death Rate` = parse_number(full_cancer_data$`Lower 95% Confidence Interval for Death Rate`)
full_cancer_data$`Upper 95% Confidence Interval for Death Rate` = parse_number(full_cancer_data$`Upper 95% Confidence Interval for Death Rate`)
full_cancer_data$`Average Deaths per Year` = parse_number(full_cancer_data$`Average Deaths per Year`)
### Now, for the variables related to the death rate trends, we have values of '**'. In the documentation, this is described as the data being too sparse to
### estimate the trends. For now, I will set these values to NA, but will leave the observations in the data, since I am not yet sure how I am going to be using these variables.
full_cancer_data$`Recent 5-Year Trend (2) in Death Rates` = as.numeric(full_cancer_data$`Recent 5-Year Trend (2) in Death Rates`)
full_cancer_data$`Lower 95% Confidence Interval for Trend (death rates)` = as.numeric(full_cancer_data$`Lower 95% Confidence Interval for Trend (death rates)`)
full_cancer_data$`Upper 95% Confidence Interval for Trend (death rates)` = as.numeric(full_cancer_data$`Upper 95% Confidence Interval for Trend (death rates)`)
### cleaning up Age Adjusted Incidence Rate: we have '*', '-' and '--'
### * are once again due to confidentiality, but also occur if the counts are too low. We can see that in the corresponding value for Average annual count (incidence)
### I've decided to set these to NA for now as well because I have no reasonable estimate as to what the true values could be.
### for values '-', we have and '--', they have to do with state legistlation. Once again, we'll set these to NA.
### for hashtags, this is about not including cases diagnosed in other states. For now, I'll store which observations have this, and test if its significant later.
hashtag_data = grepl( "#", full_cancer_data$`Age Adjusted Incidence Rate per 100,000`, fixed = TRUE)
hashtag_FIPS = list()
for(i in seq(1, length(hashtag_data), by = 1)){
if(hashtag_data[[i]] == TRUE){
hashtag_FIPS = append(hashtag_FIPS, full_cancer_data$FIPS[[i]])
}
}
### then, parse these as a number.
full_cancer_data$`Age Adjusted Incidence Rate per 100,000` = parse_number(full_cancer_data$`Age Adjusted Incidence Rate per 100,000`)
full_cancer_data$`Lower 95% Confidence Interval (incidence rates)` = parse_number(full_cancer_data$`Lower 95% Confidence Interval (incidence rates)`)
full_cancer_data$`Upper 95% Confidence Interval (incidence rates)` = parse_number(full_cancer_data$`Upper 95% Confidence Interval (incidence rates)`)
full_cancer_data$`Average Annual Count (incidence)` = parse_number(full_cancer_data$`Average Annual Count (incidence)`)
full_cancer_data$`Recent 5-year trend in incidence rates` = parse_number(full_cancer_data$`Recent 5-year trend in incidence rates`)
full_cancer_data$`Lower 95% Confidence Interval for Trend (incidence rates)` = parse_number(full_cancer_data$`Lower 95% Confidence Interval for Trend (incidence rates)`)
full_cancer_data$`Upper 95% Confidence Interval for Trend (incidence rates)` = parse_number(full_cancer_data$`Upper 95% Confidence Interval for Trend (incidence rates)`)
### Lastly, remove "**" from both death and Incident Recent Trends
for(i in seq(1, nrow(full_cancer_data), by = 1)){
if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "**"){
full_cancer_data$`Recent Trend (death rates)`[[i]] = NA
}
if(full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "**" | full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "*"
|full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "-" | full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "--"){
full_cancer_data$`Recent Trend (incidence rates)`[[i]] = NA
}
}
### create categorical variables for past trends - stable, falling rising are the possible values for each
falling_death_rates = list() ### 1 if Recent Trend (death rates) is falling, 0 otherwise
rising_death_rates = list() ### 1 if Recent Trend (death rates) is rising, 0 otherwise
### if both falling and rising death rates are 0, Recent Trend (death rates) is stable
falling_incidence_rates = list() ### 1 if Recent Trend (incidence rates) is falling, 0 otherwise
rising_incidence_rates = list() ### 1 if Recent Trend (incidence rates) rising, 0 otherwise
### if both falling and rising incidence rates are 0, Recent Trend (incidence rates) is stable
for(i in seq(1, nrow(full_cancer_data), by = 1)){
### first, deal with NAs
if(is.na(full_cancer_data$`Recent Trend (death rates)`[[i]])){
rising_death_rates = append(rising_death_rates, NA)
falling_death_rates = append(falling_death_rates, NA)
} else if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "rising"){
rising_death_rates = append(rising_death_rates, 1)
falling_death_rates = append(falling_death_rates, 0)
} else if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "falling"){
rising_death_rates = append(rising_death_rates, 0)
falling_death_rates = append(falling_death_rates, 1)
} else{
rising_death_rates = append(rising_death_rates, 0)
falling_death_rates = append(falling_death_rates, 0)
}
if(is.na(full_cancer_data$`Recent Trend (incidence rates)`[i])){
rising_incidence_rates = append(rising_incidence_rates, NA)
falling_incidence_rates = append(falling_incidence_rates, NA)
} else if(full_cancer_data$`Recent Trend (incidence rates)`[i] == "rising"){
rising_incidence_rates = append(rising_incidence_rates, 1)
falling_incidence_rates = append(falling_incidence_rates, 0)
} else if(full_cancer_data$`Recent Trend (incidence rates)`[i] == "falling"){
rising_incidence_rates = append(rising_incidence_rates, 0)
falling_incidence_rates = append(falling_incidence_rates, 1)
} else{
rising_incidence_rates = append(rising_incidence_rates, 0)
falling_incidence_rates = append(falling_incidence_rates, 0)
}
}
i_cancer_data = do.call(rbind.data.frame, Map('c', rising_death_rates, falling_death_rates, rising_incidence_rates, falling_incidence_rates))
names(i_cancer_data) = c("rising_death_rates", "falling_death_rates", "rising_incidence_rates", "falling_incidence_rates")
full_cancer_data = cbind(full_cancer_data, i_cancer_data)
View(full_cancer_data)
full_cancer_data = left_join(mort, incd, by = "FIPS")
### Data cleaning
### First, clean up Age-Adjusted Death Rates.
### First, there are '*' contained as values. As per the documentation contained in cancer_data_notes.csv,
### this represents, data is being withheld for reasons of confidentiality. Looking at the data, this appears to
### occur in a variety of states. I decided to remove these because we aren't looking to answer the question of which places
### have different confidentiality agreements and I know I want to use this variable.
full_cancer_data = full_cancer_data[!(full_cancer_data$`Age-Adjusted Death Rate` == "*"),]
### Since this looks good now, I am going to parse as a number
full_cancer_data$`Age-Adjusted Death Rate` = parse_number(full_cancer_data$`Age-Adjusted Death Rate`)
### The confidence interval variables for the death rate, as well as the average deaths per year also look good now, so I will convert them to numeric as well.
full_cancer_data$`Lower 95% Confidence Interval for Death Rate` = parse_number(full_cancer_data$`Lower 95% Confidence Interval for Death Rate`)
full_cancer_data$`Upper 95% Confidence Interval for Death Rate` = parse_number(full_cancer_data$`Upper 95% Confidence Interval for Death Rate`)
full_cancer_data$`Average Deaths per Year` = parse_number(full_cancer_data$`Average Deaths per Year`)
### Now, for the variables related to the death rate trends, we have values of '**'. In the documentation, this is described as the data being too sparse to
### estimate the trends. For now, I will set these values to NA, but will leave the observations in the data, since I am not yet sure how I am going to be using these variables.
full_cancer_data$`Recent 5-Year Trend (2) in Death Rates` = as.numeric(full_cancer_data$`Recent 5-Year Trend (2) in Death Rates`)
full_cancer_data$`Lower 95% Confidence Interval for Trend (death rates)` = as.numeric(full_cancer_data$`Lower 95% Confidence Interval for Trend (death rates)`)
full_cancer_data$`Upper 95% Confidence Interval for Trend (death rates)` = as.numeric(full_cancer_data$`Upper 95% Confidence Interval for Trend (death rates)`)
### cleaning up Age Adjusted Incidence Rate: we have '*', '-' and '--'
### * are once again due to confidentiality, but also occur if the counts are too low. We can see that in the corresponding value for Average annual count (incidence)
### I've decided to set these to NA for now as well because I have no reasonable estimate as to what the true values could be.
### for values '-', we have and '--', they have to do with state legistlation. Once again, we'll set these to NA.
### for hashtags, this is about not including cases diagnosed in other states. For now, I'll store which observations have this, and test if its significant later.
hashtag_data = grepl( "#", full_cancer_data$`Age Adjusted Incidence Rate per 100,000`, fixed = TRUE)
hashtag_FIPS = list()
for(i in seq(1, length(hashtag_data), by = 1)){
if(hashtag_data[[i]] == TRUE){
hashtag_FIPS = append(hashtag_FIPS, full_cancer_data$FIPS[[i]])
}
}
### then, parse these as a number.
full_cancer_data$`Age Adjusted Incidence Rate per 100,000` = parse_number(full_cancer_data$`Age Adjusted Incidence Rate per 100,000`)
full_cancer_data$`Lower 95% Confidence Interval (incidence rates)` = parse_number(full_cancer_data$`Lower 95% Confidence Interval (incidence rates)`)
full_cancer_data$`Upper 95% Confidence Interval (incidence rates)` = parse_number(full_cancer_data$`Upper 95% Confidence Interval (incidence rates)`)
full_cancer_data$`Average Annual Count (incidence)` = parse_number(full_cancer_data$`Average Annual Count (incidence)`)
full_cancer_data$`Recent 5-year trend in incidence rates` = parse_number(full_cancer_data$`Recent 5-year trend in incidence rates`)
full_cancer_data$`Lower 95% Confidence Interval for Trend (incidence rates)` = parse_number(full_cancer_data$`Lower 95% Confidence Interval for Trend (incidence rates)`)
full_cancer_data$`Upper 95% Confidence Interval for Trend (incidence rates)` = parse_number(full_cancer_data$`Upper 95% Confidence Interval for Trend (incidence rates)`)
### Lastly, remove "**" from both death and Incident Recent Trends
for(i in seq(1, nrow(full_cancer_data), by = 1)){
if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "**"){
full_cancer_data$`Recent Trend (death rates)`[[i]] = NA
}
if(full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "**" | full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "*"
|full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "_" | full_cancer_data$`Recent Trend (incidence rates)`[[i]] == "	__"){
full_cancer_data$`Recent Trend (incidence rates)`[[i]] = NA
}
}
### I am going to make a decision on whether I will keep the Average Deaths per Year and Average Annual Count.
### This data should be closely related to the adjusted rates, so  in the Age-Adjusted rates only, because unlike
### the average counts, the adjusted rates account for the differences in population.
pairs(full_cancer_data[,c("Age-Adjusted Death Rate", "Age Adjusted Incidence Rate per 100,000")])
### create categorical variables for past trends - stable, falling rising are the possible values for each
falling_death_rates = list() ### 1 if Recent Trend (death rates) is falling, 0 otherwise
rising_death_rates = list() ### 1 if Recent Trend (death rates) is rising, 0 otherwise
### if both falling and rising death rates are 0, Recent Trend (death rates) is stable
falling_incidence_rates = list() ### 1 if Recent Trend (incidence rates) is falling, 0 otherwise
rising_incidence_rates = list() ### 1 if Recent Trend (incidence rates) rising, 0 otherwise
### if both falling and rising incidence rates are 0, Recent Trend (incidence rates) is stable
for(i in seq(1, nrow(full_cancer_data), by = 1)){
### first, deal with NAs
if(is.na(full_cancer_data$`Recent Trend (death rates)`[[i]])){
rising_death_rates = append(rising_death_rates, NA)
falling_death_rates = append(falling_death_rates, NA)
} else if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "rising"){
rising_death_rates = append(rising_death_rates, 1)
falling_death_rates = append(falling_death_rates, 0)
} else if(full_cancer_data$`Recent Trend (death rates)`[[i]] == "falling"){
rising_death_rates = append(rising_death_rates, 0)
falling_death_rates = append(falling_death_rates, 1)
} else{
rising_death_rates = append(rising_death_rates, 0)
falling_death_rates = append(falling_death_rates, 0)
}
if(is.na(full_cancer_data$`Recent Trend (incidence rates)`[i])){
rising_incidence_rates = append(rising_incidence_rates, NA)
falling_incidence_rates = append(falling_incidence_rates, NA)
} else if(full_cancer_data$`Recent Trend (incidence rates)`[i] == "rising"){
rising_incidence_rates = append(rising_incidence_rates, 1)
falling_incidence_rates = append(falling_incidence_rates, 0)
} else if(full_cancer_data$`Recent Trend (incidence rates)`[i] == "falling"){
rising_incidence_rates = append(rising_incidence_rates, 0)
falling_incidence_rates = append(falling_incidence_rates, 1)
} else{
rising_incidence_rates = append(rising_incidence_rates, 0)
falling_incidence_rates = append(falling_incidence_rates, 0)
}
}
i_cancer_data = do.call(rbind.data.frame, Map('c', rising_death_rates, falling_death_rates, rising_incidence_rates, falling_incidence_rates))
names(i_cancer_data) = c("rising_death_rates", "falling_death_rates", "rising_incidence_rates", "falling_incidence_rates")
full_cancer_data = cbind(full_cancer_data, i_cancer_data)
View(full_cancer_data)
names(full_cancer_data)
reg_cancer_data = full_cancer_data[,c("County.x", "FIPS", "Age-Adjusted Death Rate",
"Recent 5-year trend in incidence rates",
"Recent 5-Year Trend (2) in Death Rates", "rising_death_rates",
"falling_death_rates",
"rising_incidence_rates",
"falling_incidence_rates")]
View(reg_cancer_data)
pairs(reg_cancer_data)
pairs(reg_cancer_data[,c("FIPS", "Age-Adjusted Death Rate",
"Recent 5-year trend in incidence rates",
"Recent 5-Year Trend (2) in Death Rates", "rising_death_rates",
"falling_death_rates",
"rising_incidence_rates",
"falling_incidence_rates")])
pairs(reg_cancer_data[,c("Age-Adjusted Death Rate",
"Recent 5-year trend in incidence rates",
"Recent 5-Year Trend (2) in Death Rates", "rising_death_rates",
"falling_death_rates",
"rising_incidence_rates",
"falling_incidence_rates")])
pairs(reg_cancer_data[,c("Age-Adjusted Death Rate",
"Recent 5-year trend in incidence rates",
"Recent 5-Year Trend (2) in Death Rates")])
lm_test = lm(data = reg_cancer_data,
"Age-Adjusted Death Rate" ~
"Recent 5-year trend in incidence rates" +
"Recent 5-Year Trend (2) in Death Rates" + "rising_death_rates" +
"falling_death_rates" + "rising_incidence_rates" + "falling_incidence_rates"
+ "rising_death_rates"*"Recent 5-year trend in incidence rates" +
"falling_death_rates"*"Recent 5-year trend in incidence rates"
+ "rising_incidence_rates"*"Recent 5-year trend in incidence rates"
+ "falling_incidence_rates"*"Recent 5-year trend in incidence rates"
+ "rising_death_rates"*"Recent 5-Year Trend (2) in Death Rates" +
"falling_death_rates"*"Recent 5-Year Trend (2) in Death Rates"
+ "rising_incidence_rates"*"Recent 5-Year Trend (2) in Death Rates" +
"falling_incidence_rates"*"Recent 5-Year Trend (2) in Death Rates")
reg_cancer_data = full_cancer_data[,c("County.x", "FIPS", "Age-Adjusted Death Rate", "Age Adjusted Incidence Rate per 100,000",
"Recent 5-year trend in incidence rates",
"Recent 5-Year Trend (2) in Death Rates", "rising_death_rates",
"falling_death_rates",
"rising_incidence_rates",
"falling_incidence_rates")]
pairs(reg_cancer_data[,c("Age-Adjusted Death Rate", "Age Adjusted Incidence Rate per 100,000",
"Recent 5-year trend in incidence rates",
"Recent 5-Year Trend (2) in Death Rates")])
lm_test = lm(data = reg_cancer_data,
"Age-Adjusted Death Rate" ~ "Age Adjusted Incidence Rate per 100,000" + "rising_death_rates" +"falling_death_rates"+"rising_incidence_rates"+"falling_incidence_rates")
lm_test = lm(data = reg_cancer_data, "Age-Adjusted Death Rate" ~ "Age Adjusted Incidence Rate per 100,000" + "rising_death_rates" + "falling_death_rates" + "rising_incidence_rates" + "falling_incidence_rates")
lm_test = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `rising_death_rates` + `falling_death_rates` + `rising_incidence_rates` + `falling_incidence_rates`)
summary(lm_test)
lm_test = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `rising_death_rates` + `falling_death_rates`)
summary(lm_test)
lm_test = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `rising_death_rates` + `falling_death_rates`
`Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates)
lm_test = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `rising_death_rates` + `falling_death_rates` +
`Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates)
summary(lm_test)
lm_test = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `rising_death_rates` +
`Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates)
summary(lm_test)
lm_test = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `rising_death_rates` +
`Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates)
summary(lm_test)
lm_test = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `rising_death_rates` + `Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates)
summary(lm_test)
lm_t = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `rising_death_rates` + `Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates)
summary(lm_t)
lm_t = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates)
summary(lm_t)
lm_t = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_incidence_rates + `Age Adjusted Incidence Rate per 100,000`*rising_incidence_rates)
summary(lm_t)
lm_t = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_incidence_rates + `Age Adjusted Incidence Rate per 100,000`*rising_incidence_rates)
summary(lm_t)
lm_t = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_incidence_rates)
summary(lm_t)
lm_t = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `Age Adjusted Incidence Rate per 100,000`*rising_death_rates)
summary(lm_t)
lm_full = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_incidence_rates + `Age Adjusted Incidence Rate per 100,000`*rising_incidence_rates)
summary(lm_full)
lm_full = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_incidence_rates - falling_incidence_rates + `Age Adjusted Incidence Rate per 100,000`*rising_incidence_rates)
summary(lm_full)
lm_full = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_incidence_rates - falling_incidence_rates - falling_death_rates+ `Age Adjusted Incidence Rate per 100,000`*rising_incidence_rates)
summary(lm_full)
lm_full = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates - falling_death_rates+ `Age Adjusted Incidence Rate per 100,000`*rising_incidence_rates)
summary(lm_full)
lm_full = lm(data = reg_cancer_data, `Age-Adjusted Death Rate` ~ `Age Adjusted Incidence Rate per 100,000` + `Age Adjusted Incidence Rate per 100,000`*rising_death_rates + `Age Adjusted Incidence Rate per 100,000`*falling_death_rates - falling_death_rates+ `Age Adjusted Incidence Rate per 100,000`*rising_incidence_rates- rising_incidence_rates)
summary(lm_full)
plot(lm_full)
plot(y = lm_full$fitted.values, x = reg_cancer_data$`Age-Adjusted Death Rate`)
plot(y = lm_full$fitted.values, x = lm_full$model)
plot(y = lm_full$fitted.values, x = lm_full$terms)
source("DataCleaning.Rmd", local = knitr::knit_global())
source("DataCleaning.Rmd", local = knitr::knit_global())
source("DataCleaning.R", local = knitr::knit_global())
read_chunk('DataCleaning.Rmd')
library(knitr)
read_chunk('DataCleaning.Rmd')
